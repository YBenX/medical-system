# 快速启动指南

## 📋 前置检查

在开始之前，请确保已安装：

- [ ] .NET 9 SDK ([下载地址](https://dotnet.microsoft.com/download/dotnet/9.0))
- [ ] Node.js 16+ ([下载地址](https://nodejs.org/))
- [ ] 文本编辑器或IDE（推荐VS Code）
- [ ] DeepSeek 或 Qwen API密钥

检查是否已安装：
```bash
dotnet --version   # 应显示 9.x.x
node --version     # 应显示 v16.x.x 或更高
npm --version      # 应显示 8.x.x 或更高
```

## 🚀 5分钟快速启动

### 步骤1: 配置AI API密钥 (1分钟)

编辑 `backend/appsettings.json` 文件：

```json
{
  "AI": {
    "Provider": "DeepSeek",
    "DeepSeek": {
      "ApiUrl": "https://api.deepseek.com/v1/chat/completions",
      "ApiKey": "sk-your-api-key-here",  // ⚠️ 替换为你的密钥
      "Model": "deepseek-chat"
    }
  }
}
```

> 💡 如果使用Qwen，将Provider改为"Qwen"并配置Qwen的ApiKey

### 步骤2: 启动后端 (1分钟)

打开终端，执行：

```bash
cd backend
dotnet restore
dotnet run
```

看到以下信息表示成功：
```
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:5000
```

### 步骤3: 初始化测试数据 (1分钟) - 可选

**方式1: 使用SQLite工具**
- 下载SQLite Browser ([下载地址](https://sqlitebrowser.org/))
- 打开 `backend/medical.db`
- 执行 `backend/init-data.sql` 中的SQL语句

**方式2: 跳过此步，通过前端界面手动添加**

### 步骤4: 启动前端 (2分钟)

打开新的终端窗口，执行：

```bash
cd frontend
npm install    # 首次运行需要安装依赖
npm run dev
```

看到以下信息表示成功：
```
  VITE v5.x.x  ready in xxx ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
```

### 步骤5: 访问应用

打开浏览器，访问：http://localhost:5173

## 🎯 快速测试流程

### 1. 测试AI会话
1. 点击顶部"AI会话"菜单
2. 在输入框输入："你好"
3. 应该收到AI的回复

### 2. 创建患者档案
1. 点击"患者建档"按钮
2. 填写表单：
   - 姓名：张三
   - 性别：男
   - 出生日期：1990-01-01
   - 电话：13800138000
3. 点击"确定"

### 3. 预约挂号（如果已初始化数据）
1. 点击顶部"预约挂号"菜单
2. 选择科室：内科
3. 选择医生
4. 选择日期和时段
5. 点击"确认预约"

## 🔧 常见问题解决

### 问题1: 后端启动失败

**错误**: `dotnet: command not found`
**解决**: 安装.NET 9 SDK

**错误**: `端口5000已被占用`
**解决**:
```bash
# 修改 backend/Program.cs 中的端口，或停止占用5000端口的程序
# Windows: netstat -ano | findstr :5000
# Linux/Mac: lsof -i :5000
```

### 问题2: 前端无法连接后端

**症状**: 前端显示"请求失败"或网络错误

**解决方案**:
1. 确认后端已启动（访问 http://localhost:5000/swagger 查看API文档）
2. 检查 `frontend/src/api/axios.js` 中的 baseURL
3. 检查浏览器控制台的错误信息

### 问题3: AI无响应

**可能原因**:
1. ❌ API密钥未配置或错误
2. ❌ 网络无法访问AI服务
3. ❌ API配额用完

**解决步骤**:
1. 检查 `backend/appsettings.json` 中的API密钥
2. 测试网络连接：
   ```bash
   curl https://api.deepseek.com/v1/chat/completions \
     -H "Authorization: Bearer YOUR_API_KEY" \
     -H "Content-Type: application/json" \
     -d '{"model":"deepseek-chat","messages":[{"role":"user","content":"test"}]}'
   ```
3. 检查API服务商控制台的配额使用情况

### 问题4: 数据库错误

**症状**: 数据无法保存或读取

**解决方案**:
```bash
cd backend
rm medical.db    # 删除现有数据库
dotnet run       # 重新运行，自动创建新数据库
```

## 📊 验证系统功能

### 功能检查清单

- [ ] AI会话正常响应
- [ ] 患者建档成功
- [ ] 患者列表显示正常
- [ ] 患者搜索功能正常
- [ ] 医生列表显示（如已初始化数据）
- [ ] 预约挂号成功（如已初始化数据）

### 查看系统状态

**后端API文档**:
访问 http://localhost:5000/swagger

**数据库内容**:
```bash
# 使用SQLite命令行工具
sqlite3 backend/medical.db
sqlite> .tables              # 查看所有表
sqlite> SELECT * FROM Patients;  # 查看患者数据
```

**前端控制台**:
按F12打开浏览器开发者工具，查看Network和Console标签

## 🎨 界面预览

启动成功后，你应该看到：

1. **顶部导航栏**: AI会话 | 患者管理 | 预约挂号
2. **AI会话页面**:
   - 左侧：快捷操作按钮
   - 右侧：聊天窗口
3. **患者管理页面**: 患者列表表格
4. **预约挂号页面**:
   - 左侧：科室和医生选择
   - 右侧：日期和时段选择

## 📝 下一步

系统启动成功后，你可以：

1. **查看需求文档**: `需求.md` - 了解完整功能需求
2. **查看项目说明**: `项目说明.md` - 了解技术架构
3. **阅读README**: `README.md` - 了解详细开发指南
4. **开始开发**: 根据需求添加新功能

## 🆘 需要帮助？

1. **查看文档**:
   - README.md - 使用说明
   - 项目说明.md - 技术文档
   - 需求.md - 功能需求

2. **检查日志**:
   - 后端：终端输出
   - 前端：浏览器Console
   - 数据库：medical.db

3. **常用命令**:
   ```bash
   # 后端
   cd backend
   dotnet build        # 构建项目
   dotnet run          # 运行项目
   dotnet clean        # 清理构建

   # 前端
   cd frontend
   npm install         # 安装依赖
   npm run dev         # 开发模式
   npm run build       # 生产构建
   ```

---

**祝你使用愉快！** 🎉
